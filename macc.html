<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>부경대학교 탄소발자국 대시보드 - MACC</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .sidebar {
            height: 100vh;
            width: 280px;
            position: fixed;
            z-index: 1;
            top: 0;
            left: 0;
            background-color: #1f2937;
            overflow-x: hidden;
            padding-top: 20px;
        }
        
        .main-content {
            margin-left: 280px;
            padding: 20px;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }

        .summary-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .summary-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .macc-chart-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            height: calc(100vh - 400px);
            min-height: 600px;
        }

        .macc-chart {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 8px;
        }

        .strategy-badge {
            display: inline-block;
            background-color: #3b82f6;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 4px;
        }

        .cost-effective {
            background-color: #10b981;
        }

        .medium-cost {
            background-color: #f59e0b;
        }

        .high-cost {
            background-color: #ef4444;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- 사이드바 -->
    <div class="sidebar text-white">
        <div class="px-6 py-4">
            <h1 class="text-xl font-bold">부경대학교</h1>
            <p class="text-sm opacity-80">탄소발자국 대시보드</p>
        </div>
        <div class="mt-10">
            <ul>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/" class="flex items-center">
                        <i class="fas fa-home mr-3"></i>
                        <span>홈</span>
                    </a>
                </li>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/vehicle" class="flex items-center">
                        <i class="fas fa-car mr-3"></i>
                        <span>차량</span>
                    </a>
                </li>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/waste" class="flex items-center">
                        <i class="fas fa-trash mr-3"></i>
                        <span>폐기물</span>
                    </a>
                </li>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/water" class="flex items-center">
                        <i class="fas fa-tint mr-3"></i>
                        <span>물</span>
                    </a>
                </li>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/greenery" class="flex items-center">
                        <i class="fas fa-tree mr-3"></i>
                        <span>녹지</span>
                    </a>
                </li>
                <li class="px-6 py-3 hover:bg-gray-700">
                    <a href="/power" class="flex items-center">
                        <i class="fas fa-bolt mr-3"></i>
                        <span>전력</span>
                    </a>
                </li>
                <li class="px-6 py-3 bg-purple-600">
                    <a href="/macc" class="flex items-center">
                        <i class="fas fa-chart-bar mr-3"></i>
                        <span>MACC</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
        <!-- 헤더 -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold">MACC</h1>
            <div class="flex items-center">
                <div class="relative mr-4">
                    <select class="bg-white border rounded-md px-4 py-2 pr-8 appearance-none focus:outline-none">
                        <option>2025년</option>
                        <option>2024년</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
               
            </div>
        </div>

        <!-- Summary 섹션 -->
        <div class="mb-6">
            <h2 class="text-lg font-semibold mb-4 text-gray-700">Summary</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- 태양광 발전 시스템 설치 -->
                <div class="summary-card">
                    <div>
                        <p class="text-sm text-gray-500">태양광 발전 시스템 설치</p>
                        <h3 class="text-xl font-bold">1,234 tCO₂eq</h3>
                        
                    </div>
                    <div class="summary-icon bg-yellow-500">
                        <i class="fas fa-solar-panel text-white text-xl"></i>
                    </div>
                </div>
                
                <!-- 리유저블 용기 공유/반납 시스템 구축 -->
                <div class="summary-card">
                    <div>
                        <p class="text-sm text-gray-500">리유저블 용기 시스템 구축</p>
                        <h3 class="text-xl font-bold">1,234 tCO₂eq</h3>
                        
                    </div>
                    <div class="summary-icon bg-green-500">
                        <i class="fas fa-recycle text-white text-xl"></i>
                    </div>
                </div>
                
                <!-- 공용 공간 조명시설 센서 설치 -->
                <div class="summary-card">
                    <div>
                        <p class="text-sm text-gray-500">조명시설 센서 설치</p>
                        <h3 class="text-xl font-bold">1,041 tCO₂eq</h3>
                        
                    </div>
                    <div class="summary-icon bg-blue-500">
                        <i class="fas fa-lightbulb text-white text-xl"></i>
                    </div>
                </div>
                
                <!-- 셔틀버스 전기차 전환 -->
                <div class="summary-card">
                    <div>
                        <p class="text-sm text-gray-500">셔틀버스 전기차 전환</p>
                        <h3 class="text-xl font-bold">1,234 tCO₂eq</h3>
                        
                    </div>
                    <div class="summary-icon bg-red-500">
                        <i class="fas fa-bus text-white text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- MACC 차트 섹션 -->
        <div class="macc-chart-container">
            <h3 class="text-lg font-semibold mb-4">Marginal Abatement Cost Curve (MACC) - Pukyong National University</h3>
            <img src="/backend/data/image.png" alt="MACC Chart - Marginal Abatement Cost Curve for Pukyong National University showing various carbon reduction strategies including Solar Power System Installation, Lighting Sensor Installation, Electric Shuttle Bus Conversion, and Reusable Container System with their respective costs and carbon reduction potential" class="macc-chart">
            
            <!-- 차트 설명 -->
            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-sm text-gray-700 mb-2">차트 해석</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• X축: 누적 탄소 감축량 (tons CO₂)</li>
                        <li>• Y축: 톤당 감축 비용 (Million KRW)</li>
                        <li>• 낮은 위치일수록 비용 효율적</li>
                        <li>• 넓은 폭일수록 큰 감축 효과</li>
                    </ul>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-sm text-gray-700 mb-2">우선순위 권장사항</h4>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>• 1순위: 조명 센서 설치 (저비용, 즉시 효과)</li>
                        <li>• 2순위: 셔틀버스 전기차 전환</li>
                        <li>• 3순위: 태양광 발전 시스템</li>
                        <li>• 4순위: 리유저블 용기 시스템</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 차트 이미지 클릭 시 확대 기능
        document.querySelector('.macc-chart').addEventListener('click', function() {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="max-w-6xl max-h-full p-4">
                    <img src="${this.src}" alt="${this.alt}" class="max-w-full max-h-full object-contain">
                    <button class="absolute top-4 right-4 text-white text-2xl hover:text-gray-300" onclick="this.closest('.fixed').remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
            
            // 모달 배경 클릭 시 닫기
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            // ESC 키로 닫기
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    modal.remove();
                }
            }, { once: true });
        });

        // 연도 선택기 이벤트 처리
        document.querySelector('select').addEventListener('change', function(e) {
            const year = e.target.value.replace('년', '');
            // 실제 구현 시 백엔드 API 호출하여 해당 연도 MACC 데이터 업데이트
            console.log(`MACC 데이터 업데이트: ${year}년`);
        });

        // 보고서 다운로드 기능
        document.querySelector('button').addEventListener('click', function() {
            // 실제 구현 시 MACC 보고서 PDF 다운로드 기능
            alert('MACC 분석 보고서를 다운로드합니다.');
        });

        // 통계 카드 호버 효과 개선
        document.querySelectorAll('.summary-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px)';
                this.style.boxShadow = '0 8px 15px rgba(0, 0, 0, 0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
            });
        });
    </script>
</body>
</html>